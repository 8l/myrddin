use "sys.use"
use "types.use"
use "fmt.use"

pkg std =
	const now	: (-> time)
;;

/* microseconds since epoch */
const now = {
	var tm
	var sec
	var nsec

	if clock_gettime(`Clockrealtime, &tm) == 0	
		sec = tm.sec
		nsec = tm.nsec castto(uint64)
		-> (sec*1_000_000 + nsec/1000) castto(time)
	else
		-> -1
	;;
}
