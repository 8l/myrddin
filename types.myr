use std

pkg bld =
	type build = struct
		cmd	: byte[:][:]
		/* build params */
		targs	: targ[:]
		gensrc	: std.htab(byte[:], gentarg#)#
		prefix	: byte[:]
		system	: byte[:]
		arch	: byte[:]
	;;

	type parser = struct
		/* parse input */
		data	: byte[:]
		rest	: byte[:]
		fname	: byte[:]
		line	: int
	;;


	type depgraph = struct
		roots	: byte[:][:]
		deps	: std.htab(byte[:], byte[:][:])#
		libs	: std.htab(byte[:], byte[:][:])#
		input	: std.htab(byte[:], byte[:])#
		sources	: std.htab(byte[:], bool)#
		updated	: std.htab(byte[:], bool)#
		seen	: std.htab(byte[:], bool)#
		done	: std.htab(byte[:], bool)#
	;;

	type myrtarg = struct
		name	: byte[:]
		inputs	: byte[:][:]
		libdeps	: byte[:][:]
		built	: bool
		install	: bool
		runtime	: byte[:]
		incpath	: byte[:][:]
		ldscript	: byte[:]
	;;

	type gentarg = struct
		out	: byte[:][:]
		cmd	: byte[:][:] 
		durable	: bool
	;;

	type targ = union
		`Bin	myrtarg#
		`Lib	myrtarg#
		`Test	myrtarg#
		`Gen	gentarg#
		`Sub	byte[:][:]
		`Man	byte[:][:]
	;;
;;
